webpackJsonp([16],{18:function(e,t,a){var s,n;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function a(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var n=typeof s;if("string"===n||"number"===n)e.push(this&&this[s]||s);else if(Array.isArray(s))e.push(a.apply(this,s));else if("object"===n)for(var u in s)r.call(s,u)&&s[u]&&e.push(this&&this[u]||u)}}return e.join(" ")}var r={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=a:(s=[],n=function(){return a}.apply(t,s),!(void 0!==n&&(e.exports=n)))}()},32:function(e,t,a){var s,n;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function a(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var n=typeof s;if("string"===n||"number"===n)e.push(s);else if(Array.isArray(s))e.push(a.apply(null,s));else if("object"===n)for(var u in s)r.call(s,u)&&s[u]&&e.push(u)}}return e.join(" ")}var r={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=a:(s=[],n=function(){return a}.apply(t,s),!(void 0!==n&&(e.exports=n)))}()},59:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderSmall=void 0;var n=a(2),r=s(n),u=a(3),l=s(u),o=a(4),i=s(o),c=a(6),f=s(c),d=a(5),_=s(d),m=a(1),p=s(m),h=a(32),v=s(h),g=a(91),y=s(g),P=function(e){function t(){return(0,l["default"])(this,t),(0,f["default"])(this,(0,r["default"])(t).apply(this,arguments))}return(0,_["default"])(t,e),(0,i["default"])(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return p["default"].createElement("div",{className:y["default"].spinner})}}]),t}(p["default"].Component);t.LoaderSmall=function(){return p["default"].createElement("div",{className:(0,v["default"])(y["default"].spinner,y["default"].spinnerSmall)})};t["default"]=P},75:function(e,t){e.exports={alias:"Preferences__alias___1pHVc",network:"Preferences__network___23w5m",status:"Preferences__status___1weNp",username:"Preferences__username___goFS5",avatar:"Preferences__avatar___2BNF1",background:"Preferences__background___37UTQ",uploadSuccess:"Preferences__uploadSuccess___1eYxL",checkmark:"Preferences__checkmark___egl8J",avatarHolder:"Preferences__avatarHolder___4975Y",backgroundHolder:"Preferences__backgroundHolder___akKts",photoPlus:"Preferences__photoPlus___UGvQb",savePreferences:"Preferences__savePreferences___36g_K",state:"Preferences__state___1sZbE",stateStatus:"Preferences__stateStatus___1C-B8",success:"Preferences__success___1qm6I",error:"Preferences__error___2D8YK",formError:"Preferences__formError___2HsBB",formSuccess:"Preferences__formSuccess___1JY43",loader:"Preferences__loader___1nDm3",photoLeft:"Preferences__photoLeft___gTIU9",photoRight:"Preferences__photoRight___26_Tv",descTitle:"Preferences__descTitle___1xhDy",category:"Preferences__category___2JHnt",anim:"Preferences__anim___2njXn"}},91:function(e,t){e.exports={spinner:"Loader__spinner___1FNks",rotation:"Loader__rotation___1di0_",spinnerSmall:"Loader__spinnerSmall___36DvX"}},109:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.saveStatus=t.saveAlias=t.saveUsername=t.removeBackground=t.removeAvatar=void 0;var s=a(28),n=a(68),r=a(87),u=t.removeAvatar=function(){return function(e,t){fetch(s.config.http+"/upload/avatar/delete",{method:"post",credentials:"include",headers:{"Content-type":s.config.post}}).then(function(){e((0,n.fetchRemoveAvatar)(!0))})}},l=t.removeBackground=function(){return function(e,t){fetch(s.config.http+"/upload/background/delete",{method:"post",credentials:"include",headers:{"Content-type":s.config.post}}).then(function(){e((0,n.fetchRemoveBackground)(!0))})}},o=t.saveUsername=function(e){return function(t,a){if(t((0,n.fetchUsername)({status:!0})),0===e.length)return t((0,n.fetchUsername)({status:!1,state:!1,message:"Поле не может быть пустым!"}));if(e.length>30)return t((0,n.fetchUsername)({status:!1,state:!1,message:"Не подходит! Придумайте более короткое имя."}));t((0,r.changeUsername)(e));var u=f({username:e});console.log(e),fetch(s.config.http+"/api/preferences/change/username",{method:"POST",headers:{"Content-type":s.config.post},credentials:"include",body:u}).then(function(e){return e.json()}).then(function(e){console.log(e),e.status,setTimeout(function(){t((0,n.fetchUsername)({status:!1,state:!0,message:"Имя успешно обновлено."}))},1e3)})}},i=t.saveAlias=function(e){return function(t,a){t((0,n.fetchAlias)({status:!0}));var u=new RegExp(/^[a-z\d_]{1,32}$/g);if(!u.test(e))return t((0,n.fetchAlias)({status:!1,state:!1,message:"Только латинские буквы, цифры и _"}));t((0,r.changeAlias)(e));var l=f({alias:e});fetch(s.config.http+"/api/preferences/change/alias",{method:"POST",headers:{"Content-type":s.config.post},credentials:"include",body:l}).then(function(e){return e.json()}).then(function(e){setTimeout(function(){t((0,n.fetchAlias)({status:!1,state:!0,message:"Адрес успешно обновлён."}))},1e3)})}},c=t.saveStatus=function(e){return console.log(e),function(t,a){t((0,n.fetchStatus)({status:!0})),e||(e=""),e.length>250&&t((0,n.fetchStatus)({status:!1,state:!1,message:"Пожалуйста, не пишите себе так много!"})),t((0,r.changeStatus)(e));var u=f({status:e});fetch(s.config.http+"/api/preferences/change/status",{method:"POST",headers:{"Content-type":s.config.post},credentials:"include",body:u}).then(function(e){return e.json()}).then(function(e){console.log(e),setTimeout(function(){t((0,n.fetchStatus)({status:!1,state:!0,message:"Статус успешно обновлён."}))},1e3)})}},f=function(e){var t="";return e.username&&(t+="username="+e.username+"&"),e.alias&&(t+="alias="+e.alias+"&"),e.status&&(t+="status="+e.status+"&"),e.vk&&(t+="vk="+e.vk+"&"),e.twitter&&(t+="twitter="+e.twitter+"&"),e.tumblr&&(t+="tumblr="+e.tumblr+"&"),e.instagram&&(t+="instagram="+e.instagram+"&"),t};t.actions={removeAvatar:u,removeBackground:l,saveUsername:o,saveAlias:i,saveStatus:c}},234:function(e,t){e.exports={innerAddon:"UpdateSocialNetworks__innerAddon___lZLbO",rightAddon:"UpdateSocialNetworks__rightAddon___192aC",leftAddon:"UpdateSocialNetworks__leftAddon___1jrlz",middleAddon:"UpdateSocialNetworks__middleAddon___1EMra",fa:"UpdateSocialNetworks__fa___1FKlY",alert:"UpdateSocialNetworks__alert___258YA",fadeIn:"UpdateSocialNetworks__fadeIn___3YDex"}},256:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),r=s(n),u=a(3),l=s(u),o=a(4),i=s(o),c=a(6),f=s(c),d=a(5),_=s(d),m=a(1),p=s(m),h=a(9),v=function(e){function t(){return(0,l["default"])(this,t),(0,f["default"])(this,(0,r["default"])(t).apply(this,arguments))}return(0,_["default"])(t,e),(0,i["default"])(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return this.props.email?p["default"].createElement("div",{className:"text-grey"},"адрес электронной почты:"," ",p["default"].createElement("b",null,this.props.email)):null}}]),t}(m.Component);v.propTypes={email:m.PropTypes.string};var g=function(e){return{email:e.auth.user.email}};t["default"]=(0,h.connect)(g)(v)},257:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),r=s(n),u=a(3),l=s(u),o=a(4),i=s(o),c=a(6),f=s(c),d=a(5),_=s(d),m=a(1),p=s(m),h=a(9),v=function(e){function t(){return(0,l["default"])(this,t),(0,f["default"])(this,(0,r["default"])(t).apply(this,arguments))}return(0,_["default"])(t,e),(0,i["default"])(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){if(!this.props.created_at)return null;var e=g(this.props.created_at);return p["default"].createElement("div",{className:"text-grey"},"вы зарегистрировались:"," ",p["default"].createElement("b",null,e))}}]),t}(m.Component);v.propTypes={created_at:m.PropTypes.string.isRequired};var g=function(e){if(!e)return!1;e=new Date(e);var t=e.getMonth();10>t&&(t="0"+t);var a=e.getDate();return 10>e&&(a="0"+e),a+"."+t+"."+e.getFullYear()},y=function(e){return{created_at:e.auth.user.created_at}};t["default"]=(0,h.connect)(y)(v)},258:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),r=s(n),u=a(3),l=s(u),o=a(4),i=s(o),c=a(6),f=s(c),d=a(5),_=s(d),m=a(1),p=s(m),h=a(9),v=a(13),g=function(e){function t(){return(0,l["default"])(this,t),(0,f["default"])(this,(0,r["default"])(t).apply(this,arguments))}return(0,_["default"])(t,e),(0,i["default"])(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){if(!this.props.vk)return null;var e=(0,v.formatVK)(this.props.vk),t="http://vk.com/"+e;return p["default"].createElement("div",{className:"text-grey"},"страница вконтакте:"," ",p["default"].createElement("a",{href:t},p["default"].createElement("b",null,t)))}}]),t}(m.Component);g.propTypes={vk:m.PropTypes.string};var y=function(e){return{vk:e.auth.user.social.vk}};t["default"]=(0,h.connect)(y)(g)},260:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e){return{username:e.auth.user.username,alias:e.auth.user.alias,status:e.auth.user.status,isFetching:e.isFetching}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(2),u=s(r),l=a(3),o=s(l),i=a(4),c=s(i),f=a(6),d=s(f),_=a(5),m=s(_),p=a(1),h=s(p),v=a(75),g=s(v),y=a(234),P=s(y),k=a(9),E=a(109),S=a(18),b=s(S),A=a(59),N=a(258),T=s(N),U=a(257),C=s(U),w=a(256),x=s(w),j=b["default"].bind(g["default"]),M=function(e){function t(e){(0,o["default"])(this,t);var a=(0,d["default"])(this,(0,u["default"])(t).call(this,e));return a.state={username:a.props.username,alias:a.props.alias,status:a.props.status},a}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({username:e.username,alias:e.alias,status:e.status})}},{key:"handleChange",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a)}},{key:"render",value:function(){var e=this,t=this.props.isFetching;return h["default"].createElement("div",null,h["default"].createElement("h3",null,"имя"),h["default"].createElement("div",{className:j(P["default"].innerAddon)},h["default"].createElement("input",{value:this.state.username,onChange:this.handleChange.bind(this,"username"),className:j({username:!0,fetchingForms:t.username.status,formError:t.username.state===!1,formSuccess:t.username.state===!0}),onBlur:function(){return e.props.saveUsername(e.state.username)},ref:function(t){return e.username=t}}),h["default"].createElement("div",{className:P["default"].rightAddon},t.username.status&&h["default"].createElement(A.LoaderSmall,null))),t.username.message&&h["default"].createElement("div",{className:j({state:!0,success:t.username.state===!0,error:t.username.state===!1})},t.username.message),h["default"].createElement("h3",null,"адрес страницы"),h["default"].createElement("small",null,"поделитесь им с друзьями, чтобы они смогли найти вас"),h["default"].createElement("div",{className:j(P["default"].innerAddon)},h["default"].createElement("input",{value:this.state.alias,onChange:this.handleChange.bind(this,"alias"),className:j({alias:!0,fetchingForms:t.alias.status,formError:t.alias.state===!1,formSuccess:t.alias.state===!0}),onBlur:function(){return e.props.saveAlias(e.state.alias)},ref:function(t){return e.alias=t}}),h["default"].createElement("div",{className:P["default"].rightAddon},t.alias.status&&h["default"].createElement(A.LoaderSmall,null))),t.alias.message&&h["default"].createElement("div",{className:j({state:!0,success:t.alias.state===!0,error:t.alias.state===!1})},t.alias.message),h["default"].createElement("h3",null,"о себе"),h["default"].createElement("div",{className:j(P["default"].innerAddon)},h["default"].createElement("textarea",{value:this.state.status,onChange:this.handleChange.bind(this,"status"),className:j({status:!0,fetchingForms:t.status.status,formError:t.status.state===!1,formSuccess:t.status.state===!0}),onBlur:function(){return e.props.saveStatus(e.state.status)},ref:function(t){return e.status=t}}),h["default"].createElement("div",{className:P["default"].rightAddon},t.status.status&&h["default"].createElement(A.LoaderSmall,null))),t.status.message&&h["default"].createElement("div",{className:j({stateStatus:!0,success:t.status.state===!0,error:t.status.state===!1})},t.status.message),h["default"].createElement("div",null,h["default"].createElement(T["default"],null),h["default"].createElement(C["default"],null),h["default"].createElement(x["default"],null)))}}]),t}(p.Component);M.propTypes={username:p.PropTypes.string,alias:p.PropTypes.string,status:p.PropTypes.string,isFetching:p.PropTypes.object.isRequired,saveStatus:p.PropTypes.func.isRequired,saveAlias:p.PropTypes.func.isRequired,saveUsername:p.PropTypes.func.isRequired},t["default"]=(0,k.connect)(n,E.actions)(M)}});